<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.3.3 (459822)"/><meta name="author" content="刘六六丶"/><meta name="created" content="2020-07-09 13:02:46 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2020-07-09 13:25:15 +0000"/><title>v8</title></head><body><div>v8采用即时编译（以往需要将js源代码转成字节码，v8直接翻译成可执行的机器码）</div><div><br/></div><div>v8内存设限（1.5g）</div><div><br/></div><div>v8内存分配图</div><div><img src="v8.resources/2112C81B-453D-4B57-8B11-BFF3F9F9EE50.png" height="602" width="1444"/></div><div>白色部分新生代    32M</div><div>右侧橘色老生代<span>    1.4G</span></div><div><br/></div><div>v8垃圾回收策略</div><div><span>    </span><img src="v8.resources/E97B350F-07C5-4DE1-A9CE-9C46F2162BF2.png" height="834" width="1432"/><br/></div><div><span>    采用分代回收的思想</span><br/></div><div><span><br/></span></div><div><span><span>    <span>    <span>    核心思想：内存分为新生代（存活时间比较短的对象），老生代（</span></span></span></span>存活时间较长的对象<span><span><span><span>）</span></span></span><br/></span></div><div><span><span><span><span><span>    <span>    <span>    <span>    <span>    <span>    <span>    <span>  针对不同对象采用不同的算法</span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span>    <span>    <span>    </span></span></span><br/></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>    <span>    <span>    回收新生代的原理：采用复制算法 + 标记整理，将新生代空间再平分（使用空间换时间，总有一方处于空闲状态），使用空间为from，空闲为to，活动空间存储在from空间，标记整理后将对象拷贝至to，from与to交换空间完成释放</span></span></span><br/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>    <span>    <span>    拷贝过程中可能出现晋升（新生代对象移动到老生代）触发条件：一轮gc后还活着的新生代需要晋升。to空间使用率超过25%</span></span></span><br/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>    <span>    <span>    回收老生代对象：主要采用标记清除，标记整理，增量标记。首先使用标记清除完成垃圾空间回收，若晋升时而且当前存储区不够的时候 使用标记整理</span></span></span><br/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span>  </span></span></span></span></span></span></span></span></span></span></span></span><img src="v8.resources/ABF38008-2CA2-4B92-9561-9440029BD5FE.png" height="668" width="1356"/></div><div><br/></div><div>v8常用的gc算法</div><div><br/></div><div><span>    分代回收</span><br/></div><div><span><br/></span></div><div>    空间复制<br/></div><div><br/></div><div><span>    标记清除</span><br/></div><div><span><br/></span></div><div><span><span>    标记整理</span><br/></span></div><div><span><span><br/></span></span></div><div><span><span><span>    标记增量</span><br/></span></span></div><div><br/></div><div><br/></div></body></html>