<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.3.3 (459822)"/><meta name="author" content="刘六六丶"/><meta name="created" content="2020-07-09 12:19:14 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2020-07-09 13:02:43 +0000"/><title>gc算法</title></head><body><div><br/></div><div>gc垃圾回收机制的简写</div><div>找到内存中的垃圾，并释放和回收空间<br/></div><div><br/></div><div>什么是垃圾？</div><div><span>    程序不再需要使用的对象</span><br/></div><div><span><span>    程序中不能再访问到的对象</span><br/></span></div><div><br/></div><div>常见的gc算法：</div><div><br/></div><div>    <b><u>引用计数</u></b><br/></div><div><span><span>    <span>        <b>核心思想：</b>设置引用数，判断当前引用数是否为0</span></span><br/></span></div><div><span><span><span><span><span>    <span>    <span>    <span>    </span>引用计数器：引用关系改变时修改引用数字，数字为零立即回收</span></span></span><br/></span></span></span></span></div><div><span><span><span><span><span><span><span><br/></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span>    <span>        <b>优点：</b>发现垃圾时立即回收</span></span><br/></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span>    <span>    <span>    <span>    <span>    <span>   最大限度减少程序暂停 </span></span></span></span></span></span><br/></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><br/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>            <b>缺点：</b>无法回收循环引用的对象</span><br/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>    <span>    <span>    <span>    <span>       时间开销大</span></span></span></span></span><br/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><br/></span></div><div><span>    <b><u>标记清除</u></b><br/></span></div><div><span><span><span>    <span>        <b>核心思想</b>：分标记和清除两个阶段完成</span></span><br/></span></span></div><div><span><span><span><span><span><span>    <span>    <span>    <span>    <span>    <span>    <span>      遍历所有对象标记活动对象</span></span></span></span></span></span></span><br/></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span>    <span>    <span>    <span>    <span>    <span>    <span>    <span>  遍历所有对象删除没有标记的对象，同时清除上一次的标记</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>    <span>    <span>    <span>    <span>    <span>    <span>      回收相应的空间</span></span></span></span></span></span></span> </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><br/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>    <span>    <span>    </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><img src="gc%E7%AE%97%E6%B3%95.resources/F4356D6C-080F-482E-98E5-8DE44AC27AE8.png" height="1062" width="1908"/><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span/></span></span> </span></span></span></span></span></span></span></span><br/></span></span></span></span></span></span></span></span></span></span></span></span></div><div><br/></div><div><span>    <span>        <b>优点：</b>解决了引用计数的缺点</span></span><br/></div><div><span><span><span><span>    <span>        <b>缺点：</b>无法立即回收</span></span><br/></span></span></span></div><div><span><span><span><span><span><span><span>    <span>    <span>    <span>    <span>    <span>   回收空间碎片化 </span></span></span></span></span></span><br/></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span><span><span><span>    <span>    <span>    <span>    <span>    <span>    <span>      </span></span></span></span></span></span></span><br/></span></span></span></span></span></span></span></span></span></span></span></span></div><div><span><span>    <b><u>标记整理</u></b><br/></span></span></div><div><span><span><span><span>    <span>        <b>核心思想：</b>与标记清除大致相同，不同点是在删除标记之前现做空间整理</span></span><br/></span></span></span></div><div><span><span><span><span><span><span><br/></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span>    <span>        <b>优点：</b>解决了标记清除的空间碎片化问题</span></span><br/></span></span></span></span></span></span></div><div><span><span><span><span><span><span><span><span><span><span>    <span>        <b>缺点：</b>无法立即回收</span></span><br/></span></span></span></span></span></span></span></span></span></div></body></html>